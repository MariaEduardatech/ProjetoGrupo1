<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style/dashboard.css">
    <link rel="icon" href="./style/assets/PitaTech_logo.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/sessao.js"></script>

    <title>Dashboard | Pitatech</title>

</head>

<body onload="validarSessao()">

    <header>

        <div class="navbar">

            <img src="./style/assets/PitaTech_logo.png" alt="Logo Pitatech">

            <ul>
                <li><a href="index.html">Home</a></li>
                <li id="selecionado"><a href="#">Dashboard</a></li>
                <li><a href="calculadora.html">Calculadora</a></li>
                <li><a href="quemsomos.html">Quem somos</a></li>

            </ul>

            <div id="b_usuario"><a href="./login.html">Entrar</a></div>
            <div class="sair" onclick="limparSessao()">
                <h3><a href="./login.html">Sair</a></h3>
            </div>

        </div>

    </header>


  <main class="dashboardPrincipal">
    <h1 class="titulo">Dashboard Geral</h1>

 <section class="kpis">
    <div class="kpi">Quantidade de Talhões com Faixa Ideal<br> <span style="color: black; font-size: 23px;" >2 Talhões</span></div>
    <div class="kpi">Talhão com Maior Umidade <br> <span style="color: black; font-size: 23px;"> Talhão 2 (90%)</span> </div>
    <div class="kpi">Talhão com Menor Umidade  <br> <span style="color: black; font-size: 23px;">Talhão 1 (45%)</span></div>
  </section>


 </main>
<div class="testando">
<div class="registro-alertas">
  <h2>Registro de Alertas Acima e Abaixo da Umidade Ideal</h2>
  <div class="lista-alertas">
    <div class="alerta-item"><span>T1 - Umidade: 45%</span><span>31/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 85%</span><span>28/05/25</span></div>
    <div class="alerta-item"><span>T3 - Umidade: 50%</span><span>28/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 90%</span><span>25/05/25</span></div>
    <div class="alerta-item"><span>T3 - Umidade: 55%</span><span>25/05/25</span></div>
    <div class="alerta-item"><span>T1 -  Umidade: 87%</span><span>22/05/25</span></div>
    <div class="alerta-item"><span>T2 -  Umidade: 49%</span><span>20/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 50%</span><span>18/05/25</span></div>
    <div class="alerta-item"><span>T3 - Umidade: 90%</span><span>18/05/25</span></div>
    <div class="alerta-item"><span>T1 - Umidade: 55%</span><span>17/05/25</span></div>
    <div class="alerta-item"><span>T3 -  Umidade: 87%</span><span>17/05/25</span></div>
    <div class="alerta-item"><span>T1 -  Umidade: 49%</span><span>15/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 50%</span><span>18/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 90%</span><span>18/05/25</span></div>
    <div class="alerta-item"><span>T2 - Umidade: 55%</span><span>30/05/25</span></div>
    <div class="alerta-item"><span>T3 -  Umidade: 87%</span><span>27/05/25</span></div>
    <div class="alerta-item"><span>T1 -  Umidade: 49%</span><span>20/05/25</span></div>
  </div>
</div>

   <section class="graficoInicial">
    <h2>Variação de Umidade por Talhão</h2>
    <div class="grafico">
      <canvas id="graficoUmidadeLinha"></canvas>
    </div>
  </section>
</div>
 

<h2 class="tituloPlantação">Plantação</h2>
   <div class="plantacao-box">
  
  <div class="talhoes-grid">
    <div class="talhao">T1</div>
    <div class="talhao">T2</div>
    <div class="talhao"><a href="dashboardTalhão.html"><button>T3</button></a></div>
    <!-- <div class="talhao">T4</div>
    <div class="talhao">T5</div>
    <div class="talhao">T6</div> -->
  </div>
</div>
       <footer>
        <div class="navfot">
            <div id="menu-redes">
                <div id="lista">
                    <ul>
                        <li><a href="./home.html">Home</a></li>
                        <li><a href="#">Dashboard</a></li>
                        <li><a href="./calculadora.html">Calculadora</a></li>
                        <li><a href="./quemsomos.html">Quem somos</a></li>     
                    </ul>
                </div>

                <div id="logo">
                    <img src="../style/assets/PitaTech_logo.png" alt="PitaTech_logo">
                </div>
             
                <div id="redes2">
                    <img src="../style/assets/instagram.png" alt="Logo do Instagram"><span id="instagram">Instagram</span>
                    <img src="../style/assets/linkedin.png" alt="Logo do Linkedin"><span id="linkedin">Linkedin</span>
                    <img src="../style/assets/facebook.png" alt="Logo do Facebook"><span id="facebook">Facebook</span>
                </div>
            </div>
    
            <span id="direitos">PITATECH © 2025. Todos os direitos reservados. Desenvolvido por PITATECH TEAM.</span>
        </div>
    </footer>   

</body>

</html>

<script>

  var idDaEmpresa = sessionStorage.ID_EMPRESA = json.empresa;

  var alertas = [];

  async function checarAlertas(idEmpresa) {
    const resposta = await fetch("/usuario/BuscarAlertas");
    const dados = await resposta.json();

    alertas.push(...dados);

    console.log(empresas);
}

checarAlertas();


  const ctx = document.getElementById('graficoUmidadeLinha').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['06h', '08h', '10h', '12h', '14h', '16h', '18h'],
      datasets: [
        {
          label: 'T1',
          data: [45, 48, 50, 52, 49, 47, 46],
          borderColor: '#ff6384',
          fill: false
        },
        {
          label: 'T2',
          data: [85, 87, 86, 88, 90, 89, 90],
          borderColor: '#36a2eb',
          fill: false
        },
        {
          label: 'T3',
          data: [78, 80, 83, 82, 85, 86, 87],
          borderColor: '#ffcd56',
          fill: false
        }
        // },
        // {
        //   label: 'T4',
        //   data: [60, 62, 59, 58, 57, 59, 61],
        //   borderColor: '#4bc0c0',
        //   fill: false
        // },
        // {
        //   label: 'T5',
        //   data: [75, 78, 79, 80, 81, 82, 84],
        //   borderColor: '#9966ff',
        //   fill: false
        // },
        // {
        //   label: 'T6',
        //   data: [50, 52, 53, 54, 55, 56, 55],
        //   borderColor: '#ff9f40',
        //   fill: false
        // }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          min: 0,
          max: 100,
          title: {
            display: true,
            text: 'Umidade (%)'
          }
        },
        x: {
          title: {
            display: true,
            text: 'Horário'
          }
        }
      }
    }
  });
</script>